  <?php

/**
 * Implements hook_menu().
 */

function tb_user_menu_menu(){
  $items = array(
    'user/my-tickets' => array(
      'title' => t('My tickets'),
      'page callback' => 'tb_user_router',
      'page arguments' => array('tickets', 'my_tickets', 'user'),
      'access arguments' => array('access content'),
    ),
    'user/tickets-in-progress' => array(
      'title' => t('Tickets in progress'),
      'page callback' => 'tb_user_router',
      'page arguments' => array('tickets', 'tickets_in_progress', 'user'),
      'access arguments' => array('access content'),
    ),
    'user/tickets-defended' => array(
      'title' => t('Tickets defended'),
      'page callback' => 'tb_user_router',
      'page arguments' => array('tickets', 'tickets_defended', 'user'),
      'access arguments' => array('access content'),
    ),
    'user/tickets-responded-to' => array(
      'title' => t('Tickets responded to'),
      'page callback' => 'tb_user_router',
      'page arguments' => array('tickets', 'tickets_responded_to', 'user'),
      'access arguments' => array('access content'),
    ),
  );
  
  return $items;
}

/*
 * Callback
 */

function tb_user_router($view, $display, $var_type = ''){
  switch($var_type){
    case 'user':
      global $user;
      $args = $user->uid;
      break;
  }

  return isset($args) ? views_embed_view($view, $display, $args) : views_embed_view($view, $display);
}

function tb_user_menu_init(){
  drupal_add_js(drupal_get_path('module', 'tb_user_menu'). '/js/header-menu.js');
  drupal_add_css(drupal_get_path('module', 'tb_user_menu'). '/css/header-menu.css');
}

function tb_user_menu_alter($items){
  //dpm($items);
}