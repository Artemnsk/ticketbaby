<?php

/**
 * Implements hook_menu().
 */
function tb_settings_menu() {
  $items = array();
  
  $items['admin/tb-settings'] = array(
    'title' => 'TicketBaby settings',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('tb_settings_admin_form'),
    'access arguments' => array("administer site configuration"),
  );

  return $items;
}

function tb_settings_admin_form($form, &$form_state){
  $form['default_ticket_category_id'] = array(
    '#type' => 'textfield',
    '#title' => t('Default ticket category id'),
    '#default_value' => variable_get("default_ticket_category_id", 12),
    '#size' => 10,
    '#maxlength' => 10,
    '#description' => t('When user create ticket he should see default ticket if no variable pass.'),
    '#required' => TRUE,
  );
  
  $form['default_ticket_fields'] = array(
    '#type' => 'textarea',
    '#title' => t("Default ticket fields"),
    '#default_value' => variable_get("default_ticket_fields", "field_ticket_category\nfield_date_of_ticket"),
    '#description' => t("PLEASE DON'T CHANGE IF YOU ARE NOT SURE! Default ticket fields in creation form - doesn't matter which category user select. Use new line to separate."),
    '#required' => TRUE,
  );
  return system_settings_form($form);
}

/**
 * Define and export date formats.
 * Features can not do it.
 */

/**
 * Implements hook_date_formats().
 */
function tb_settings_date_formats() {
  $formats = array();
  $formats[] = array(
    'type' => "day_month_year",
    'format' => "d/m/y",
    'locales' => array(),
  );
  return $formats;
}

/**
 * Implements hook_date_format_types().
 */
function tb_settings_date_format_types() {
  $types = array();
  $types['day_month_year'] = t('Day/Month/Year');
  return $types;
}